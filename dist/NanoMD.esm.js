!function(){const t=window,e=document,i=String,s=Boolean,n=Array,o=Object,r=JSON,l=Math,a=Map,u=URL,h=Node,c=Date,d=Blob,f=RegExp,p=parseInt,g=location,m="video/mp4",y="video/quicktime",v=["javascript","js","ts","html","css","xml","json","sql","java","python","ruby","php","cpp","csharp","swift","typescript","kotlin","go","rust","perl","bash"],w=t.matchMedia&&t.matchMedia("(prefers-color-scheme: dark)").matches,b="span.material-symbols-outlined",C=/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(?:channels\/[\w]+\/|groups\/[\w]+\/videos\/|album\/\d+\/video\/|video\/|)(\d+)/,A=/\.([\w_-]+)?/gi,$=/\#([\w_-]+)?/i,M=/^\w+(?=[\#\.]*)/i,_=/(\n[\u0020\u00A0\u0009]*|\n[\u0020\u00A0\u0009]*>[\u0020\u00A0\u0009]*|\n[\u0020\u00A0\u0009]*([\-\*\+]|\d+\.)[\u0020\u00A0\u0009]+)\\?(\#{1,6})[\u0020\u00A0\u0009]+([^\n]+)/,I=/(\n)([^\n]+)\n\={3,}([\u0020\u00A0\u0009]*\n)/,k=/(\n)([^\n]+)\n\-{3,}([\u0020\u00A0\u0009]*\n)/,x=/([\u0020\u00A0\u0009]*\|[\u0020\u00A0\u0009]*)\\?(\#{1,6})[\u0020\u00A0\u0009]+([^\n\|]*)([\u0020\u00A0\u0009]*)/,T=/\*{2}([^\n\*]*)\*{2}/,N=/\_{2}([^\n\_]*)\_{2}/,D=/\*([^\n\*]*)\*/,E=/\_([^\n\_]*)\_/,S=/\~{2}([^\n\~]*)\~{2}/,L=/\={2}([^\n\=]*)\={2}/,P=/\~([^\n\~]*)\~/,j=/\^([^\n\^]*)\^/,R=/(\n[\u0020\u00A0\u0009]*)(\*{3,}|\-{3,})([\u0020\u00A0\u0009]*\n)/,O=/[\"\']{0,1}([\u0020\u00A0\u0009]*)(mailto\:)?([\u0020\u00A0\u0009]*)(\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)([\u0020\u00A0\u0009]*)[\"\']{0,1}/,F=/(\s{1})\\?[\#＃]{1}([\u4e00-\u9fff\u3040-\u30ff\uac00-\ud7a3a-zA-Z0-9_]+)/,H=/[& \<\>\"\']/g,z=/\[([^\]\n]+)?\]\(([^\)\n\u0020\u00A0\u0009]+)([\u0020\u00A0\u0009]*[\"\']([^\)\n]+)[\"\'])?\)/,K=/\`([^\n\`]*)\`/,B=/^\n|\n$/g,U=/\`{3}(\w*)([\s\S]*?)\s*\`{3}/,G=/((\n([\u0020\u00A0]{4,}|[\u0009]))[^\n]+)+/,Z=/^\s|\s$/g,q=/\!\[([^\]\n]+)?\]\(([^\)\n\u0020\u00A0\u0009]+)([\u0020\u00A0\u0009]*[\"\']([^\)\n]+)[\"\'])?\)(\(([0-9]+\%?)?[\u0020\u00A0\u0009\*x]+([0-9]+\%?)?([\u0020\u00A0\u0009]+(left|right))?\))?/,W=/^['"].*['"]$/,V=/\n(([\-\*\+]|\d+\.)[\u0020\u00A0\u0009]+(.+)(\n.*\S.*)*)+/,Y=/(([\-\*\+]|\d+\.)[\u0020\u00A0\u0009]+(.+)(\n.*\S.*)*)+/,J=/^(([\-\*\+]|\d+\.)[\u0020\u00A0\u0009]*[^\n]+)/,X=/\.mov$/,Q=/\.mp4$/,tt=/[A-Za-z\%]/,et=/[\"\']{0,1}([\u0020\u00A0\u0009]*)(https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*))([\u0020\u00A0\u0009]*)[\"\']{0,1}/,it=/(\<[\u00A0\u0020\u0009\>]*\/?[\u00A0\u0020\u0009\>]*br[\u00A0\u0020\u0009\>]*\/?[\u00A0\u0020\u0009\>]*\>|\n)/,st=/\n/,nt=/\\\!/g,ot=/\\\`/g,rt=/\\\#/g,lt=/\\\*/g,at=/\\\_/g,ut=/\\\~/g,ht=/\\\^/g,ct=/\\\=/g,dt=/\\\</g,ft=/\\\>/g,pt=/\\\[/g,gt=/\\\]/g,mt=/\\\(/g,yt=/\\\)/g,vt=/\$/g,wt=/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?/,bt="mailto:",Ct="\n",At="_blank",$t="selected",Mt="background",_t="textarea",It="startsWith",kt="key",xt="stringify",Tt="keys",Nt="TEXT_NODE",Dt="ELEMENT_NODE",Et="nodeType",St="add",Lt="alt",Pt="appendChild",jt="as",Rt="auto",Ot="baseOffset",Ft="blockquote",Ht="body",zt="br",Kt="button",Bt="charAt",Ut="checked",Gt="checkbox",Zt="childNodes",qt="children",Wt="class",Vt="clearTimeout",Yt="clipboardData",Jt="code",Xt="Color",Qt="color",te="content",ee="contentEditable",ie="controls",se="copy",ne="create",oe="ctrlKey",re="dark",le="dataset",ae="delay",ue="display",he="div",ce="editor",de="em",fe="empty",pe="emptyContent",ge="error",me="float",ye="floor",ve="focus",we="fontFamily",be="forEach",Ce="from",Ae="get",$e="has",Me="head",_e="height",Ie="hide",ke="href",xe="id",Te="iframe",Ne="img",De="index",Ee="init",Se="inner",Le="input",Pe="insert",je="isArray",Re="join",Oe="label",Fe="language",He="lastChild",ze="lazy",Ke="length",Be="li",Ue="light",Ge="link",Ze="list",qe="loading",We="map",Ve="mark",Ye="match",Je="metaKey",Xe="min",Qe="mode",ti="Name",ei="name",ii="node",si="none",ni="number",oi="object",ri="offset",li="ol",ai="outerHTML",ui="parent",hi="pd-md-editor",ci="pd-md-viewer",di="placeholder",fi="pre",pi="props",gi="preload",mi="prettyprint",yi="prevent",vi="push",wi="px",bi="querySelector",Ci="random",Ai="rel",$i="remove",Mi="replace",_i="click",Ii="script",ki="scroll",xi="section",Ti="set",Ni="slice",Di="source",Ei="span",Si="split",Li="src",Pi="string",ji="strong",Ri="style",Oi="sub",Fi="success",Hi="sup",zi="table",Ki="tag",Bi="target",Ui="tbody",Gi="td",Zi="temp",qi="test",Wi="textContent",Vi="th",Yi="thead",Ji="title",Xi="toLowerCase",Qi="toUpperCase",ts="tr",es="trim",is="type",ss="ul",ns="value",os="video",rs="viewer",ls="width",as="console",us="apply",hs="void",cs="vdom",ds="getElementById",fs="crossOrigin",ps="preconnect",gs=St+"EventListener",ms="background"+Xt,ys=Wt+ti,vs=Wt+"List",ws=ne+"DocumentFragment",bs=ne+"Element",Cs=ne+"TextNode",As=Ce+"CharCode",$s=ve+"Background"+Xt,Ms=ve+"Offset",_s=ve+"Text"+Xt,Is=Ae+"Data",ks=Ae+"Selection",xs=$e+"OwnProperty",Ts=De+"Of",Ns=Se+"HTML",Ds=Se+"Text",Es=Pe+"Before",Ss=ii+ti,Ls=ii+"Value",Ps="onclick",js="onwheel",Rs=ui+"Element",Os=ui+"Node",Fs=di+Xt,Hs=yi+"Default",zs=yi+"Refresh",Ks=bi+"All",Bs=$i+"AllRanges",Us=ki+"Height",Gs=ki+"Sync",Zs=ki+"Top",qs=Ti+"Attribute",Ws=Ti+"Data",Vs=Ti+"End",Ys=Ti+"Start",Js=Ti+"Timeout",Xs=Ki+ti,Qs=Ki+"Path",tn=Ki+"Target";let en="";const sn="@excl@",nn="@grave@",on="@num@",rn="@ast@",ln="@lowbar@",an="@tilde@",un="@Hat@",hn="@equal@",cn="@lt@",dn="@gt@",fn="@lsqb@",pn="@rsqb@",gn="@lpar@",mn="@rpar@",yn="&lt;",vn="&gt;",wn="&amp;",bn="&nbsp;",Cn="&quot;",An="&apos;",$n={create:"CREATE",append:"APPEND",replace:"REPLACE",text:"TEXT",prop:"PROP",remove:"REMOVE"};Array[Ce]({[Ke]:26},((t,e)=>i[As](97+e)))[be](((e,s)=>{let n=s<10,o=s>=10&&s<20,r=s>=20,l=i(s),a=l[Bt](l[Ke]-1),u=i=>{en+=i?e[Qi]():e,t[(i?"$":"_")+(r?"_":"")+a+(o?"_":"")]=i?e[Qi]():e};u(0),u(1),n&&(en+=s,t["_"+e]=s)}));t._a,t._b,t._c,t._d,t._e,t._f,t._g,t._h,t._i,t._j;const Mn=t._0,_n=t._1,In=(t._2,t._3,t._4,t._5,t._6),kn=t._7,xn=t._8,Tn=(t._9,t._0_,t._1_,t._2_,t._3_,t._4_,t._5_,t._6_,t._7_,t._8_),Nn=(t._9_,t.__0),Dn=(t.__1,t.__2,t.__3,t.__4,t.__5,t.$0,t.$1,t.$2,t.$3,t.$4,t.$5,t.$6,t.$7,t.$8,t.$9,t.$0_,t.$1_,t.$2_,t.$3_,t.$4_,t.$5_,t.$6_,t.$7_,t.$8_,t.$9_,t.$_0,t.$_1,t.$_2,t.$_3,t.$_4,t.$_5,"https://fonts.googleapis.com"),En=Dn+"/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&display=swap",Sn="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js",Ln="https://cdn.jsdelivr.net/npm/@pardnchiu/nanomd@1.11.5/dist/NanoMD.css",Pn="NanoMD\nGitHub: https://github.com/pardnchiu/NanoMD\nCreator: Pardn Chiu\nLicense: Proprietary";let jn;for(let t of[Hn(Ge,{[Ai]:ps,[ke]:"https://fonts.gstatic.com",[fs]:""}),Hn(Ge,{[Ai]:ps,[ke]:Dn,[fs]:""}),Hn(Ge,{[Ai]:gi,[ke]:En,[jt]:Ri,[fs]:"anonymous"}),Hn(Ge,{[Ai]:"stylesheet",[ke]:En}),Hn(Ge,{[Ai]:"preconnect",[ke]:"https://cdn.jsdelivr.net"}),Hn(Ge,{[Ai]:gi,[ke]:Sn,[jt]:Ii}),Hn(Ii,{[Li]:Sn}),Hn(Ge,{[Ai]:gi,[ke]:Ln,[jt]:Ri}),Hn(Ge,{[Ai]:"stylesheet",[ke]:Ln})])e[Me][Pt](t);document.addEventListener("DOMContentLoaded",(t=>{!function(...t){const i=Hn(Ii,`${as}.log.${us}(${hs} 0, ${JSON.stringify(t)});`);e[Ht][Pt](i),i[$i]()}("%c"+Pn,"line-height: 1.75rem; font-size: 0.875rem;")}));const Rn="abcdefghijklmnopqrstuvwxyz0123456789",On=new a;function Fn(t=32){let e="";for(let i=0;i<t;i++)e+=Rn[Bt](l[ye](36*l[Ci]()));return On[$e](e)?Fn(t):(On[Ti](e,1),e)}function Hn(t="",i,s){const r=((t[Ye](M)||[])[0]||"")[es](),l=((t[Ye]($)||[])[1]||"")[es](),a=(A[qi](t)?t[Ye](A):[])[We]((t=>t[Mi](/^\./,"")));if(r[Ke]<1)return;let u,h,c=t===Zi,d=c?e[ws]():e[bs](r);if(91!=Pn[Ke])return d;l[Ke]>0&&(d.id=l);for(const t of a)d[vs][St](t);if(null==i&&null!=s&&([i,s]=[s,null]),null!=i&&null!=s)[u,h]=[i,s];else if(null==s)typeof i===Pi||typeof i===ni||n[je](i)?h=i:u=i;else if(null==i)return d;return(()=>{if(typeof u===oi&&null!=u)for(const t in u){if(!u[xs](t))continue;const e=u[t];if({[ns]:1,[Ds]:1,[Ns]:1,[Wi]:1,[ee]:1,[$t]:1}[t])d[t]=e;else if({[ue]:1,[Qt]:1,[ms]:1,[Mt]:1,[ls]:1,[_e]:1,[me]:1}[t])d[Ri][t]=e;else if(t===le&&typeof e===oi)for(const t of o[Tt](e))d[le][t]=e[t];else null!=e&&d[qs](t,e)}})(),(()=>{if(null==h)return;const t=typeof h===oi;if(n[je](h)){for(let t of h){const i=t instanceof Element;typeof t===Pi||typeof t===ni?c?d[Pt](e[Cs](t)):d[Ns]+=t:i&&d[Pt](t)}return}if(t)return;const i=h,s=r===Le,o=r===_t;r===Ne||r===Di?d[Li]=i:o||s?d[ns]=i:c?d[Pt](e[Cs](h)):d[Ns]=i})(),d}function zn(t=""){return"{{"+(t[es]()||Rt)+"-"+Fn()+"}}"}function Kn(t=""){return t[Mi](H,(t=>({"&":wn," ":bn,"<":yn,">":vn,'"':Cn,"'":An}[t])))}function Bn(t){const e=Hn(he);return e[Pt](t),e[Ns]}function Un(t,e=""){return new f(t,e)}function Gn(t){if(t)return t[ys]===hi||t[Ss][Xi]()===he&&t[Os][ys]===hi?t:Gn(t[Os])}function Zn(t=""){if((t=t[es]())[Ke]<1)return"";const e=t[Ye](wt)||[];return e[Ke]>2&&11===e[1][Ke]?e[1]:""}function qn(t=""){if((t=t[es]())[Ke]<1)return"";return(t[Ye](C)||[])[1]}let Wn=new a;function Vn(t,e="",i="",s="",n="",o=""){const r=zn(i),l=s instanceof HTMLElement?s:Hn(i,s);return Wn[Ti](r,l[ai]),e[Mi](t,n+r+o)}const Yn=/(\n)(\>\s*\[\!(NOTE|TIP|IMPORTANT|WARNING|CAUTION)\]\n)?(\>[^\n]*(\n)?)+/,Jn=/^\>[\u00A0\u0020\u0009]?/,Xn=/^[\u00A0\u0020\u0009]*\>[\u00A0\u0020\u0009]?/,Qn=/\n\>[\u00A0\u0020\u0009]?/g,to=/\[\!(NOTE|TIP|IMPORTANT|WARNING|CAUTION)\]/,eo={NOTE:"info",TIP:"lightbulb",IMPORTANT:"sms",WARNING:"warning",CAUTION:"error"};function io(t="",i=!0){let s;0!=i&&(i=!0);for(const e of t[Ye](Un(Yn,In))||[]){const i=e[Ye](Yn),o=i[1]||"",r=i[3]||"",l=i[5]||"";s=Hn(Ft+(r[Ke]?"."+r:"")),n(e,r),t=Vn(e,t,Ft,s,o,l)}function n(t,e=""){const i=po(t[es]()[Mi](Jn,"")[Mi](Qn,"\n"))[Si](st);for(const t in i)s[Pt](o(i[t],p(t),e))}function o(t,s=0,n=""){const r=Hn(Zi),l=t[Mi](Xn,"");if(to[qi](t)&&0===s&&i)r[Pt](Hn(Ei+".hint",[eo[n]?Hn(b,eo[n]):null,n])),r[Pt](Hn(zt));else if(Xn[qi](t)){let t=Hn(Ft);t[Pt](o(l)),r[Pt](t)}else/^[\u00A0\u0020\u0009]*\{\{/[qi](t)?r[Pt](e[Cs](t)):r[Pt](Hn(Ei,t));return r}return t}function so(t){return io(t,!1)}function no(t=""){let e=[[Jt,K]];for(let i of e){const e=i[0],s=i[1];for(let i of t[Ye](Un(s,In))||[]){const n=i[Ye](s);if(Z[qi](n[1]||""))continue;let o=(n[1]||"")[es]();o[Ke]<1||(e!=Jt?t=t[Mi](i,Hn(e,o)[ai]):(o=Kn(o),t=Vn(i,t,e,o)))}}return t}function oo(t){let e=0,i=Hn(li);for(let s in t){const n=t[s];0===p(s)&&(e=l.floor((n[Ye](/^\s*/)||[""])[0][Ke]/4));const o=Un(`^\\s{0,${4*e}}`);i[Pt](Hn(Be,Kn(n[Mi](o,""))))}return i}function ro(t="",e=!0){0!=e&&(e=!0);for(const t of[[ji,T],[ji,N],[Tn,S],[de,D],[de,E],[Ve,L],[Hi,j],[Oi,P]])!e&&{[Ve]:1,[Hi]:1,[Oi]:1}[t[0]]||i(t[0],t[1]);function i(e,i){for(const s of t[Ye](Un(i,In))||[]){const n=s[Ye](i);if(Z[qi](n[1]||""))continue;let o=(n[1]||"")[es]();o[Ke]<1||(e!=Jt?t=t[Mi](s,Hn(e,o)[ai]):(o=Kn(o),t=Vn(s,t,e,o)))}}return t}function lo(t=""){return ro(t,!1)}function ao(t="",e="",s=At){if(i(e||"")[es]()[Ke]<1)return t;for(const i of t[Ye](Un(F,In))||[]){if(i[Ye](/^\\/))continue;const n=i[Ye](F);if(n[Ke]<1)continue;const o=n[1],r=(n[2]||"")[es](),l=zn(Mn);if(r[Ke]<1)continue;const a=Hn(Zi,[Hn(Mn+"."+Ki,{[ke]:e+r,[Bi]:s===At?At:"_self"},r)]);Wn[Ti](l,Bn(a)),t=t[Mi](i,o+l)}return t}function uo(t=""){return(()=>{for(const e of t[Ye](Un(_,In))||[]){const i=e[Ye](_);if(i[Ke]<1)continue;const s=i[1]||"",n=(i[3]||"")[es]()[Ke],o=(i[4]||"")[es]();0!=l[Xe](n,o[Ke])&&(t=Vn(e,t,kn+n,o,s))}})(),(()=>{for(const e of t[Ye](Un(x,In))||[]){const i=e[Ye](x);if(i[Ke]<1)continue;const s=i[1]||"",n=(i[2]||"")[es]()[Ke],o=(i[3]||"")[es](),r=i[4]||"";0!=l[Xe](n,o[Ke])&&(t=Vn(e,t,kn+n,o,s,r))}})(),(()=>{for(const e of t[Ye](Un(I,In))||[]){const i=e[Ye](I);if(i[Ke]<1)continue;const s=i[1]||"",n=(i[2]||"")[es](),o=i[3]||"";n[Ke]<1||(t=Vn(e,t,kn+1,n,s,o))}})(),(()=>{for(const e of t[Ye](Un(k,In))||[]){const i=e[Ye](k);if(i[Ke]<1)continue;const s=i[1]||"",n=(i[2]||"")[es](),o=i[3]||"";n[Ke]<1||(t=Vn(e,t,kn+2,n,s,o))}})(),t}function ho(t=""){for(let e of t[Ye](Un(R,In))||[]){const i=e[Ye](R);if(i[Ke]<1)continue;const s=i[1]||"",n=i[3]||"",o=zn("hr");Wn[Ti](o,"<hr>"),t=t[Mi](e,s+o+n)}return t}function co(t="",e=!0){const i="this.parentElement.nextElementSibling.style.display='block';this.parentElement.style.display='none'",s="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8yNTkyXzMwNDkpIj4KPHBhdGggZD0iTTEyMCA2MEMxMjAgMjYuODYyOSA5My4xMzcxIDAgNjAgMEMyNi44NjI5IDAgMCAyNi44NjI5IDAgNjBDMCA5My4xMzcxIDI2Ljg2MjkgMTIwIDYwIDEyMEM5My4xMzcxIDEyMCAxMjAgOTMuMTM3MSAxMjAgNjBaIiBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIwLjUiLz4KPHBhdGggZD0iTTg0LjM2MzMgNTYuNTgwM0M4Ni45MzAyIDU4LjEzNzYgODYuOTMwMiA2MS44NjI2IDg0LjM2MzMgNjMuNDE5OUw1MS44MjQ4IDgzLjE2MTJDNDkuMTU5MSA4NC43Nzg2IDQ1Ljc1IDgyLjg1OTQgNDUuNzUgNzkuNzQxNFY0MC4yNTg4QzQ1Ljc1IDM3LjE0MDggNDkuMTU5MSAzNS4yMjE2IDUxLjgyNDggMzYuODM4OUw4NC4zNjMzIDU2LjU4MDNaIiBmaWxsPSJ3aGl0ZSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzI1OTJfMzA0OSI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPg==";function n(t,e,n,o){return Bn(Hn(Zi,[Hn(Mn,{[Ji]:o,[ke]:e,[Bi]:At},n||e),Hn("section.more",[Hn("img.cover","https://i.ytimg.com/vi/"+t+"/mqdefault.jpg"),Hn("img.icon",{[Ps]:i},s)]),Hn(Te,{[qe]:ze,[ls]:"640px",[Li]:"https://www.youtube.com/embed/"+t,frameborder:0,allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:"",[ue]:si})]))}function o(t,e,n,o){const r=function(t){const e=`https://vimeo.com/api/v2/video/${t}.json`;let i=null;const s=new XMLHttpRequest;s.open("GET",e,!1);try{s.send(),200===s.status?i=JSON.parse(s.responseText)[0].thumbnail_large:console.error("HTTP 錯誤:",s.status)}catch(t){console.error("無法獲取縮圖:",t)}return i}(t);return Bn(Hn(Zi,[Hn(Mn,{[Ji]:o,[ke]:e,[Bi]:At},n||e),Hn("section.more",[Hn("img.cover",r),Hn("img.icon",{[Ps]:i},s)]),Hn(Te,{[qe]:ze,[ls]:"640px",[Li]:"https://player.vimeo.com/video/"+t,frameborder:0,allow:"autoplay; fullscreen; picture-in-picture",allowfullscreen:"",[ue]:si})]))}return 0!=e&&(e=!0),(()=>{for(let i of t[Ye](Un(z,In))||[]){const s=i[Ye](z);if(s[Ke]<1)continue;const r=(s[1]||"")[es](),a=(s[2]||"")[es](),u=(s[4]||"")[es](),h=(Zn(a)||"")[es](),c=(qn(a)||"")[es]();if(0!=l[Xe](r[Ke],a[Ke]))if(h[Ke]&&e)t=Vn(i,t,he,n(h,a,r,u));else if(c[Ke]&&e)t=Vn(i,t,he,o(c,a,r,u));else{const e=Hn(Mn,{[Ji]:u,[ke]:a,[Bi]:At},r);t=Vn(i,t,Mn,e)}}})(),(()=>{for(let i of t[Ye](Un(et,In))||[]){if(i[Ye](W))continue;const s=i[Ye](et);if(s[Ke]<1)continue;const r=s[1]||"",l=(s[2]||"")[es](),a=s[5]||"",u=(Zn(l)||"")[es](),h=(qn(l)||"")[es]();if(!(l[Ke]<1))if(u[Ke]&&e)t=Vn(i,t,he,n(u,l),r,a);else if(h[Ke]&&e)t=Vn(i,t,he,o(h,l));else{const e=Hn(Mn,{[ke]:l,[Bi]:At},l);t=Vn(i,t,Mn,e,r,a)}}})(),(()=>{for(let e of t[Ye](Un(O,In))||[]){if(e[Ye](W))continue;const i=e[Ye](O);if(i[Ke]<1)continue;const s=(i[1]||"")+(i[2]||"")+(i[3]||""),n=(i[4]||"")[es](),o=i[8]||"";if(n[Ke]<1)continue;const r=Hn(Mn,{[ke]:bt+n,[Bi]:At},n);t=Vn(e,t,Mn,r,s,o)}})(),t}function fo(t=""){return co(t,!1)}function po(t=""){for(let i of t[Ye](Un(V,In))||[])e(i);function e(e){let i;e[es]()[Mi](Un(it,In),Ct)[Si](it)[be](((t,e)=>{const s=t[Ye](Y)||[],n=s[Ke]<1?null:/\d+\./[qi]((s[2]||"")[es]())?li:ss,o=(t[Ye](/\s{4}/g)||[])[Ke];let r=s[Ke]<1?t[Mi](/^\s*([\-\*\+]|\d+\.)?\s*/g,""):(s[3]||"")[es]();if(0===p(e)&&null==n)return;0===p(e)&&(i=Hn(n));let l=i;function a(t,e){if(/^\[\s*(\x)?\s*\]/[qi](e)){const i=e[es]()[Ye](/^\[\s*(\x)?\s*\]/);e=e[Mi](/^\[\s*(\x)?\s*\]\s*/,"");const s=null!=i[1];t[Pt](Hn(Be,[Hn(Oe,[Hn(Le,{[is]:Gt,[Ut]:s?"":null,[Ps]:"return false;"}),Hn(Ei,e)])]))}else t[Pt](Hn(Be,e))}if(/^\s{0,3}([\-\*\+]|\d+\.)/[qi](t))a(l,r);else if(/^\s{4,}([\-\*\+]|\d+\.)/[qi](t)){l=i[He];for(let t=0;t<o&&(null!=l&&null!=l[Xs]);t++)if(t==o-1&&l[Xs][Xi]()==Be)if(l[He]instanceof HTMLElement&&(l[He][Xs][Xi]()==li||l[He][Xs][Xi]()==ss))a(l[He],r);else if(/^\[\s*(\x)?\s*\]/[qi](r)){const t=r[es]()[Ye](/^\[\s*(\x)?\s*\]/);r=r[Mi](/^\[\s*(\x)?\s*\]\s*/,"");const e=null!=t[1];l[Pt](Hn(n,[Hn(Be,[Hn(Oe,[Hn(Le,{[is]:Gt,[Ut]:e?"":null,[Ps]:"return false;"}),Hn(Ei,r)])])]))}else l[Pt](Hn(n,[Hn(Be,r)]));else l=l[He][He]}else{if(null==i)return;for(l=i[He];null!=l[He];)l=l[He];if(l instanceof HTMLElement);else if(/^\{\{(h\d|img|pre)/[qi](l[Ls]||""));else{for(;l[Rs][Xs][Xi]()!=Be;)l=l[Rs];l[Rs][Pt](Hn(zt))}l[Rs][Ns]+=r}})),null!=i&&(t=Vn(e,t,Ze,i))}return t}function go(t=""){for(let e of t[Ye](Un(q,In))||[]){const i=e[Ye](q);if(i[Ke]<1)continue;const s=(i[1]||"")[es](),n=(i[2]||"")[es](),o=(i[4]||"")[es]();let r=(i[6]||"")[es](),l=(i[7]||"")[es](),a=(i[9]||"")[es]();if(n[Ke]<1)continue;r[Ke]&&!tt[qi](r)&&(r+=wi),l[Ke]&&!tt[qi](l)&&(l+=wi);const u=X[qi](n),h=Q[qi](n);let c;c=u?Hn(os,{[ie]:"",[Ji]:o,[ls]:r||null,[_e]:l||null},[Hn(Di,{[is]:y},n)]):h?Hn(os,{[ie]:"",[Ji]:o,[ls]:r||null,[_e]:l||null},[Hn(Di,{[is]:m},n)]):Hn(Ne,{[Lt]:s,[Ji]:o,[ls]:r||null,[_e]:l||null,[me]:a[Ke]?a:null},n),null!=c&&(t=Vn(e,t,Ne,c))}return t}function mo(t=""){for(let e of t[Ye](Un(q,In))||[]){const i=e[Ye](q);if(i[Ke]<1)continue;const s=(i[1]||"")[es](),n=(i[2]||"")[es](),o=(i[4]||"")[es]();if(n[Ke]<1)continue;const r=X[qi](n),l=Q[qi](n);let a;a=r?Hn(os,{[ie]:"",[Ji]:o},[Hn(Di,{[is]:y},n)]):l?Hn(os,{[ie]:"",[Ji]:o},[Hn(Di,{[is]:m},n)]):Hn(Ne,{[Lt]:s,[Ji]:o},n),null!=a&&(t=Vn(e,t,Ne,a))}return t}function yo(t=""){for(let e of t[Ye](Un(U,In))||[]){const i=e[Ye](U);if(i[Ke]<1)continue;const s=null==i[2][Ye](B),n=s?"":(i[1]||"")[es]()[Xi](),o=i[2]||"",r=-1!=v[Ts](n),l=o[Mi](B,"")[Si](st);let a;a=s?Hn(Jt+"."+mi,Kn(o)):Hn(fi+"."+mi,{[ei]:n},[Hn(Jt+(r?"."+Fe+"-"+n:""),{[ei]:n},[oo(l)]),Hn(Kt+"."+se)]),t=Vn(e,t,s?Jt:fi,a)}return t}function vo(t=""){for(let e of t[Ye](Un(G,In))||[]){const i=e[Ye](G),s=/<\s*\/?\s*\w+.*?>/i;if(i[Ke]<1||s.test(e))continue;const n=i[2]||"",o=e[Mi](B,"")[Si](st),r=Hn(fi+"."+mi,[Hn(Jt,[oo(o)]),Hn(Kt+"."+se)]);t=Vn(e,t,fi,r,n)}return t}function wo(t=""){let e;function i(t){const e=t[Ye](/^([\u0020\u00A0\u0009]*\n[\u0020\u00A0\u0009]*)+/)||[],i=t[Ye](/[\u0020\u00A0\u0009]*\n[\u0020\u00A0\u0009]*$/)||[];return[e[0]||"",i[0]||""]}function s(t){const i=t[es]()[Si](st);e=Hn(Zi,[Hn(zi,[Hn(Yi),Hn(Ui)])]);let s=!0,o=[],r=0;for(let t in i){const l=i[t],a=l[Ye](/((\s*)\|?((?:.*?\|)*.*)\|?)+/)||[];if(a[Ke]<1)continue;const u=(a[3]||"")[es]()[Mi](/[\u0020\u00A0\u0009]*\|[\u0020\u00A0\u0009]*$/,""),h=/^[\u0020\u00A0\u0009]*\|?([\u0020\u00A0\u0009]*[\-\:]+[\u0020\u00A0\u0009]*\|?)+[\u0020\u00A0\u0009]*$/[qi](l),c=u[Si](/[\u0020\u00A0\u0009]*\|[\u0020\u00A0\u0009]*/);if(0===p(t)&&(r=c[Ke]),h){for(let t of l[Mi](/^([\u0020\u00A0\u0009]*\|)|(\|[\u0020\u00A0\u0009]*)$/g,"")[Si](/\|/))/^\-+\:$/[qi](t[es]())?o.push("right"):/^\:\-+\:$/[qi](t[es]())?o.push("center"):o.push("left");const t=[...e.firstChild.firstChild.childNodes[0].childNodes];for(let e in t)t[e].setAttribute("align",o[e]);s=!1}else n(s,c,r,o)}}function n(t=!0,i=[],s=0,n=[]){const o=t?e.firstChild.firstChild:e.firstChild[He],r=Hn(ts);for(let e=0;e<s;e++)r[Pt](Hn(t?Vi:Gi,{align:n[e]},i[e]||""));o[Pt](r)}return(()=>{const n=/([^\n]*)(?:[\u0020\u00A0\u0009]*\|[^\n]*\|[^\n]*\n)[\u0020\u00A0\u0009]*\|([\u0020\u00A0\u0009\-\:]*\|)+\n(?:[\u0020\u00A0\u0009]*\|[^\n]*\|[^\n]*\n)*/;for(let o of t[Ye](Un(n,In))||[])J[qi](o)||(s(o),t=Vn(o,t,zi,Bn(e),...i(o)))})(),(()=>{const n=/(([^\n]+\|)*[^\n]+\n)(([\u0020\u00A0\u0009\-\:]+\|)*[\u0020\u00A0\u0009\-\:]+\n)(?:([^\n]+\|)*[^\n]+\n)*/;for(let o of t[Ye](Un(n,In))||[])s(o),t=Vn(o,t,zi,Bn(e),...i(o))})(),t}function bo(t="",e="",i=At,s=!1){for(const e of[[nt,sn],[ot,nn],[rt,on],[lt,rn],[at,ln],[ut,an],[ht,un],[ct,hn],[dt,cn],[ft,dn],[pt,fn],[gt,pn],[mt,gn],[yt,mn],[vt,"@dollar@"],[/[\u00A0\u0020]/g," "]])t=t[Mi](e[0],e[1]);for(const n of[yo,no,go,mo,co,fo,ro,lo,uo,ho,wo,io,so,po,vo,ao])(!s||n!==yo&&n!==go&&n!==co&&n!==ro&&n!==io&&n!==ao)&&(t=n(t,e,i));for(;/\{{2}\w*\-*\w{32}\}{2}/[qi](t);)for(const e of t[Ye](/\{{2}\w*\-*\w{32}\}{2}/g)||[])t=t[Mi](Un(e),Wn[Ae](e));for(const e of["h1","h2","h3","h4","h5","h6",zi,li,ss,fi,Ft,"details","hr",Oe]){const i=Un(`[  \t]*\\n[  \t]*<${e}`,In),s=Un(`${e}>[  \t]*\\n[  \t]*`,In);t=t[Mi](i,`<${e}`)[Mi](s,`${e}>`)}for(const e of[[sn,"&excl;"],[nn,"&grave"],[on,"&num;"],[rn,"&ast;"],[ln,"&lowbar;"],[an,"&tilde;"],[un,"&Hat;"],[hn,"&equal;"],[cn,yn],[dn,vn],[fn,"&lsqb;"],[pn,"&rsqb;"],[gn,"&lpar;"],[mn,"&rpar;"],[sn,"&dollar;"],[/([\u0020\u00A0\u0009]*\n[\u0020\u00A0\u0009]*){2,}/,"<br>"]])t=t[Mi](Un(e[0],In),e[1]);return t}class Co{#t="";#e;#i=!0;#s=!0;#n;#o;#r;#l;#a;#u;#h;deployKey;constructor(n={}){this.#t=(n.defaultContent||"")[es]();const o=n[Ri]||{},r=i(o[Qe]||Rt)[es]()[Xi](),l=s(null==o.fill?1:o.fill)?1:0,a=i(o[we]||"")[es]()||"'Roboto Mono', monospace",u=s(null==o.showRow?1:o.showRow)?1:0,h=o.placeholder||{},c=i(h.text||"Type here ..."),d=i(h.color||"#bfbfbf"),f=o.focus||{},p=i(f.backgroundColor||"#0000ff1a"),g=i(f.color||"#0000ffff");e[Me][Pt](Hn(Ri,`\n.${hi}{font-family: ${a}}\n.${hi}>div[data-focus="1"]{background-color:${p};color:${g};caret-color:${g}}\n.${hi}>div[data-last="1"]:empty::after{content:"${c}";color:${d} !important;caret-color:${g}}`));const m=e[ds](n[xe]);typeof n[xe]===Pi&&null!=m?(this[Ht]=m,m.classList.add(hi)):this[Ht]=Hn(xi+"."+hi),this[Ht][le][Qe]=w&&r===Rt||r===re?re:"",this[Ht][le].fill=l,this[Ht][le].row=u,this[Ht][le].pin={1:1,0:0,[!0]:1,[!1]:0}[n.tabPin]||0,this[Ht][le].wrap={1:1,0:0,[!0]:1,[!1]:0}[n.wrap]||1,this[Ht][le].saved=1,this[Ht][le].autosave=null==n.autosave?1:0,this.#h=new $o(this[Ht]);const y=this[Ht];if(this.#i=s(null==n.hotKey||n.hotKey),this.#s=s(null==n.autosave||n.autosave),this.#n=n.event||{},null==this.#r&&n[zs]&&(this.#r=t[gs]("beforeunload",(t=>{t[Hs]()})),e[gs]("keydown",(t=>{("F5"===t[kt]||(t.ctrlKey||t.metaKey)&&{r:1,R:1}[t[kt]])&&t[Hs]()}))),null!=n[Qe]){let t=i(n[Qe]||Rt)[es]()[Xi]();this[Ht][le][Qe]=w&&t===Rt||t===re?re:""}if(null!=n.fillMode){let t=s(n.fillMode)?1:0;this[Ht][le].fill=t}if(null!=n.showRow){let t=s(n.showRow)?1:0;this[Ht][le].row=t}if(null!=n[we]){let t=i(n[we])[es]()||"'Roboto Mono', monospace";e[Me][Pt](Hn(Ri,`.${hi}{font-family: ${t}}`))}let v=i(n[$s]||"")[es]()||p,b=i(n[_s]||"")[es]()||g;e[Me][Pt](Hn(Ri,`.${hi}>div[data-focus="1"]{background-color:${v};color:${b}`));let C=i(n[di]||"")[es]()||c,A=i(n[Fs]||"")[es]()||d;e[Me][Pt](Hn(Ri,`.${hi}>div[data-last="1"]:empty::after{content:"${C}";color:${A}}`)),y.onmousedown=y.onmouseup=y.ontouchend=t=>{if(t.target[Xs][Xi]()!==he)return t[Hs](),!1;this.#c()},y.oncut=t=>(this.#d(),this.#f((e=>{t[Yt][Ws]("text/plain",this.#u.body),y[qt][this.#u.start][Ns]=Kn(this.#u.left+this.#u.right),this.#p(),this.#g(y[qt][this.#u.start],this.#u.left[Ke])})),this.#m(!0,!1),!1),y.onpaste=e=>(this.#d(),this.#f((i=>{const s=((e[Yt]||t[Yt])[Is]("Text")||"")[Si](/\n/),n=s[Ke],o=n-1,r=n>1,l=this.#u.start+o,a=`${r?"":this.#u.left}${s[o]}`[Ke],u=s[0],h=r?"":this.#u.right;if(y[qt][this.#u.start][Ds]=this.#u.left+u+h,this.#p(),r)for(let t=1;t<n;t++){const e=s[t],i=Hn(he,Kn(`${e}${t===o?this.#u.right:""}`));i[Ps]=t=>this.#c(),y[Es](i,y[qt][this.#u.start+t])}this.#g(y[qt][l],a,a)})),this.#m(!0,!1),!1),y.oninput=t=>{let e,i;if("deleteCompositionText"===t.inputType){e=this.#a.index,i=this.#a.offset;for(let t of[...y[qt]]){if(t[Ss][Xi]()===he||t[Ss][Xi]()===xi)continue;t[$i]();let s=Hn(he,{"data-index":e+1,index:e+1});s[Ps]=t=>this.#c(),y[Es](s,y[qt][e]),this.#g(y[qt][e],i)}}t.inputType;let s=this.#a.isMulti,n=this.#a.multi.left,o=t.data,r=this.#a.multi.right,l=this.#a.multi.start.offset;this.#c(),s&&(this.#o[Ds]=n+o+r,this.#g(this.#o,l+1)),this.#m(!0,300)},y.onkeydown=t=>!new Mo({editor:this,hotKey:this.#i,[zs]:n[zs],event:t}).preventDefault,y.onkeyup=t=>{"Meta"!==t.key&&"Control"!==t.key&&(y[qt]&&1===y[qt][Ke]&&y.firstElementChild[Ss][Xi]()!==he&&this[Ee](null,!0,!1),this.#c(),/^(Arrow(Up|Left|Down|Right)|CapsLock|Shift|Control|Alt|Clear|Escape|F\d+)$/[qi](t.key)||this.#s&&this.#y())},y.onblur=t=>{this.#d()},this.init()}get viewer(){return this.#l}set viewer(t){this.#l=t}#v(){let t=Hn("button",[Hn("span.material-symbols-outlined","markdown"),"Markdown"]),i=Hn("button",[Hn("span.material-symbols-outlined","html"),"HTML"]),s=Hn("button",[Hn("span.material-symbols-outlined","cancel"),"Cancel"]),n=Hn("div.nanomd-pop",[Hn("strong","Export"),t,i,s]);t[Ps]=t=>{this.download("md"),n.remove()},i[Ps]=t=>{this.download("html"),n.remove()},s[Ps]=t=>{n.remove()},e[Ht][Pt](n)}#c(e,i=!1){this.#d(),this.#a=new Ao(this[Ht],e,i);const s=t[ks]();if(s.rangeCount<1)return;const n=s.getRangeAt(0);let o=e||Gn(n.commonAncestorContainer);null!=o&&this.#w(o,this.#a.index||this.#a.multi.end.index)}#f(t){this.#u=new _o(this[Ht],this.#a),t()}#p(){this.#u.removeRows()}#g(i,s,n){const o=this[Ht][Ks](he);for(let t in o){const e=o[t];if(isNaN(p(t)))continue;const i=p(t)+1;e[le][De]=i,i===o.length?e[le].last=1:e[le].last=0}if(t[ks]?t[ks]()[fe]?t[ks]()[fe]():t[ks]()[Bs]&&t[ks]()[Bs]():e[ks]&&e[ks]()[fe](),null==i)return;let r=t[ks](),l=e.createRange(),a=s??i[Zt][0][Ke],u=n??a;l.selectNode(i),i[Zt][0]?(l[Ys](i[Zt][0],a>i[Zt][0][Ke]?i[Zt][0][Ke]:a),l[Vs](i[Zt][0],u>i[Zt][0][Ke]?i[Zt][0][Ke]:u)):(l[Ys](i,0),l[Vs](i,0)),r.addRange(l),this.#c(i)}#w(t,e){const i=xi+"."+Le+"-"+Kt;let s=this[Ht][bi](i);t[le][ve]=1,this[Ht][Es](s,this[Ht][qt][e+1]),s[le][Ie]=0,this.#o=t}#d(){if(!this.#o)return;const t=xi+"."+Le+"-"+Kt,e=this[Ht][bi](t);this.#o[le][ve]=0,null!=e&&(this[Ht][Pt](e),e[le][Ie]=1),this.#o=null}#b(t){t=Kn(t);let e=this.#C;const i=Hn(he,t);i[Ps]=t=>this.#c(),e[Ds][es]()[Ke]<1?e[Ns]=t:this[Ht][Pt](i),this[Ht][Zs]=this[Ht][Us],this[rs]&&(this[rs][Ht][Zs]=this[rs][Ht][Us])}get#C(){let t=this[Ht].lastElementChild;return"SECTION"===t[Ss]&&(t=t.previousElementSibling),t}#A(t,e){const i=this[Ht][qt][this.#u.start];i[Ns]=Kn(t),this.#p(),this.#g(i,e)}#$(t,e="",i=""){const s=t[Je]||t[oe]||e===i;this.#a.check?this.#f((t=>{const n=this.#u.left,o=this.#u.body,r=this.#u.right,l=`${n}${s?`<${i}>`:e}${o}${s?`</${i}>`:e}${r}`[Mi](/\n/g,""),a=l[Ke]-r[Ke]-(s?i[Ke]+3:e[Ke]);this.#A(l,a),this.#m(!0,this.#s)})):(this.#b(s?`<${i}></${i}>`:`${e}${e}`),this.#g(this.#C,s?i[Ke]+3:e[Ke]),this.#m(!0,this.#s))}#M(t){this.#a.check?this.#f((e=>{const i=this.#u.start,s=this.#u.end;for(let e=i;e<=s;e++){const i=this[Ht][qt][e];i[Ns]=Kn(`${t} ${i[Ds]}`)}const n=this[Ht][qt][s],o=n[Ds][Ke];this.#g(n,o),this.#m(!0,this.#s)})):(this.#b(t),this.#g(this.#C,t[Ke]+1),this.#m(!0,this.#s))}#_(t="",e="",i){if(this.#a.check)return void this.#f((s=>{const n=this.#u.left,o=this.#u.right,r=`${n}${null==i?"":"!"}[${t||i}](${e}) ${o}`[Mi](/\n/g,""),l=r[Ke]-o[Ke]-1;this.#A(r,l),this.#m(!0,this.#s)}));this.#b(`${null==i?"":"!"}[${t||i}](${e})`);const s=this.#C,n=s[Ds][Ke];this.#g(s,n),this.#m(!0,this.#s)}#m(t,e){this.#c(),this.#h.add(this.#a,t,"number"==typeof e?e:0),this.unsave(),("boolean"==typeof e&&e||null==e)&&this.#y()}#I(t,i){const s=new d([i],{[is]:"application/octet-stream"}),n=u.createObjectURL(s),o=Hn(Mn,{href:n,download:`NanoMD-${c.now()}.${t}`});e[Ht][Pt](o),o[_i]()}#y(){this[Ht][le].saved=1,null!=this[rs]&&this[rs][Ee]()}init(t,e=!0,s=!0){if(this[Ht][ee]=!0,this[Ht][Ns]=null,this.#e=new Io({editor:this,autosave:this.#s,event:this.#n}),this[Ht][Pt](this.#e.body),(t=i(t||this.#t)[es]())[Ke]){this.#t="";const i=t[Mi](/\n*$/,"")[Si](/\n/);for(let t=0;t<i.length;t++){const e=i[t],s=Hn(he,{"data-index":t+1,"data-last":t===i.length-1?1:0,"data-focus":0},Kn(e));s[Ps]=t=>this.#c(),this[Ht][Pt](s)}if(!e)return}else{const t=Hn(he,{"data-index":1,"data-last":1,"data-focus":0});if(t[Ps]=t=>this.#c(),this[Ht][Pt](t),!e)return}s&&(this.#c(),this.#h.add(this.#a,!0))}changeMode(t=Ue){this[Ht][le][Qe]=t}selectAll(){this.#d();const t=this[Ht].firstElementChild,e=this.#C,i=window.getSelection(),s=document.createRange();null!=t.firstChild&&(s.setStart(t.firstChild,0),s.setEnd(e.firstChild,e.firstChild.length),i.removeAllRanges(),i.addRange(s))}save(){if(this.#s)if(this.#n[xs]("save")){if(null==this.#n.save)return!1;this.#n.save(this.text)}else this.#v();else if(this.#y(),this.#n[xs]("save")){if(null==this.#n.save)return!1;this.#n.save(this.text)}}unsave(){0!==p(this[Ht][le].saved)&&(this[Ht][le].saved=0,this[rs]&&this[rs].unsave())}indent(t){if(9!==t.keyCode)return;const e=this[Ht];return this.#f((t=>{e[qt][this.#u.start][Ns]=Kn(this.#u.left+"    "+this.#u.right),this.#p();const i=this.#u.left[Ke]+4;this.#g(e[qt][this.#u.start],i),this.#m(!0,!1)})),!1}rowIndent(t){const e=this[Ht];return this.#f((t=>{const i=this.#u.start,s=this.#u.end,n=this.#u.start!=this.#u.end;if(this.#d(),n)for(let t=i;t<=s;t++){const i=e[qt][t][Ns];e[qt][t][Ns]=Kn("    ")+i}else{const t=e[qt][i][Ns];e[qt][i][Ns]=Kn("    ")+t}const o=e[qt][i][Ns][Ke];this.#g(e[qt][this.#u.start],o),this.#m(!0,!1)})),!1}wrap(t){if(13!==t.keyCode)return;const e=this[Ht];return this.#f((t=>{e[qt][this.#u.start][Ns]=Kn(this.#u.left),this.#p(),e[Rs][Rs][Zs]+=28;const i=Hn(he,Kn(this.#u.right));i[Ps]=t=>this.#c(),e[Es](i,e[qt][this.#u.start+1]),this.#g(e[qt][this.#u.start+1],0),this.#m(!0,!1)})),!1}backspace(t){if(8!==t.keyCode)return!1;const e=this[Ht];return this.#f((t=>{if(this.#a.isMulti||this.#a.isSingle)e[qt][this.#u.start][Ns]=Kn(this.#u.left+this.#u.right),this.#p(),this.#g(e[qt][this.#u.start],this.#u.left[Ke]);else if(this.#u.left[Ke]){const t=this.#u.left[Ni](0,this.#u.left[Ke]-1);e[qt][this.#u.start][Ns]=Kn(t+this.#u.right),this.#g(e[qt][this.#u.start],t[Ke])}else{if(0===this.#u.start)return;e[qt][this.#u.start-1][Ns]+=Kn(this.#u.right),e[qt][this.#u.start][$i](),e[Rs][Rs][Zs]-=28;const t=e[qt][this.#u.start-1][Ds][Ke]-this.#u.right[Ke];this.#g(e[qt][this.#u.start-1],t)}this.#m(!0,!1)})),!1}undo(){this.#d();const t=this.#h.undo();null!=t&&(this[Ee](t[te][Ke]<1?null:t[te],!1,!1),this.unsave(),this.#g(this[Ht][qt][t[De]],t[ri]),this.#s&&this.#y())}redo(){const t=this.#h.redo();null!=t&&(this[Ee](t[te],!1,!1),this.unsave(),this.#g(this[Ht][qt][t[De]],t[ri]),this.#s&&this.#y())}heading(t,e){const i=t[Je]||t[oe],s=`${new Array(e).fill("#")[Re]("")}${0===e?"":" "}`;this.#a.check?this.#f((t=>{const n=this.#u.left[Mi](/^\s*\#*\s*/,""),o=this.#u.body,r=this.#u.right,l=`${i?`<h${e}>`:s}${n}${o}${r}${i?`</h${e}>`:""}`[Mi](/\n/g,""),a=l[Ke]-(i?5:0);this.#A(l,a),this.#m(!0,this.#s)})):(this.#b(i?`<h${e}></h${e}>`:s),this.#g(this.#C,s[Ke]-(i?5:0)),this.#m(!0,this.#s))}bold(t){this.#$(t,"**",_n)}italic(t){this.#$(t,"*",xn)}strikethrough(t){this.#$(t,"~~",Tn)}underline(t){this.#$(t,Nn,Nn)}marker(t){this.#$(t,"==",Ve)}sup(t){this.#$(t,"^",Hi)}sub(t){this.#$(t,"~",Oi)}code(t){this.#a.check?this.#f((e=>{if(this.#a.isMulti){const t=Hn(he,"```"),e=Hn(he,"```");t[Ps]=e[Ps]=t=>this.#c(),this[Ht][Es](t,this[Ht][qt][this.#u.end+1]),this[Ht][Es](e,this[Ht][qt][this.#u.start]),this.#g(this[Ht][qt][this.#u.end+1],this[Ht][qt][this.#u.end+1][Ds][Ke]),this.#m(!0,this.#s)}else this.#$(t,"`",Jt)})):this.#$(t,"`",Jt)}blockquote(){this.#a.check?this.#f((t=>{for(let t=this.#u.start;t<=this.#u.end;t++){const e=this[Ht][qt][t];e[Ns]=Kn(`> ${e[Ds]}`)}const e=this[Ht][qt][this.#u.end],i=e[Ds][Ke];this.#g(e,i),this.#m(!0,this.#s)})):(this.#b("> "),this.#g(this.#C,2),this.#m(!0,this.#s))}ul(){this.#M("-")}ol(){this.#M("1.")}link(t="",e=""){e[es]()[Ke]<1&&t[es]()[Ke]<1||this.#_(t,e)}image(t="",e="",i=""){t[es]()[Ke]<1||this.#_(i,t,e)}clear(){this.init(),this.#y()}download(t="md"){const e={md:"md",html:"html"}[t[Xi]()];if(null==e)return;let i="https://cdn.jsdelivr.net/npm/@pardnchiu/nanomd@1.11.5/dist/NanoMD-output.css";const s="md"===e?this.text[es]():`<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>NanoMD 輸出</title><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="preload" href="${i}" as="style"><link rel="stylesheet" href="${i}"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preload" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" as="style"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0" /><script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"><\/script></head><body><section class="pd-md-viewer">${bo(`\n${this.text}\n`)}</section></body></html>`;this.#I(e,s)}openfile(t){if(null==t)return void alert("請選擇檔案");this.clear();const e=new FileReader;e.readAsText(t),e.onload=()=>{this[Ht][Ns]=null;const t=e.result[es]()[Mi](/[\u0020\u00A0]/g," ");this.init(t,!1),this.#y()}}get text(){return[...this[Ht][qt]].map((t=>"SECTION"===t[Ss]?"":t[Ds]))[Re]("\n")}goBack(){this.undo()}goForward(){this.redo()}addHeading(t,e){this.heading(t,e)}addBold(t){this.bold(t)}addItalic(t){this.italic(t)}addStrikethrough(t){this.strikethrough(t)}addUnderline(t){this.underline(t)}addMarker(t){this.marker(t)}addSup(t){this.sup(t)}addSub(t){this.sub(t)}addCode(t){this.code(t)}addBlockquote(){this.blockquote()}addUl(){this.ul()}addOl(){this.ol()}addLink(t="",e=""){this.link(t,e)}addImage(t="",e="",i=""){this.image(t,e,i)}downloadMd(){this.download("md")}downloadHtml(){this.download("html")}getTxt(){return this.text}}t.PDMarkdownEditor=t.MDEditor=Co;class Ao{check=!1;isMulti=!1;isSingle=!0;index;offset;left;right;selection={};multi={};constructor(e,i,n=!1){const o=t[ks]();if(o.rangeCount<1)return;const r=o.getRangeAt(0);let l=i||Gn(r.commonAncestorContainer);if(null==l)return;let a,u,h="";if(n){l=e;const t=l[Ks](he);for(let e=0;e<t.length;e++){const i=t[e];h+=(0==e?"":"\n")+i[Ds]}a=0,u=t[Ke]-1}else r.cloneContents()[Zt][be](((t,e)=>{h+=(0==e?"":"\n")+t[Ds]})),l===e&&(a=p(Gn(o.baseNode)[le][De])-1,u=p(Gn(o.focusNode)[le][De])-1);var c=s(l===e),d=!c&&!n&&s(o[Ot]!==o[Ms]),f=!!n||s(o[Ms]>o[Ot]),g=!!n||s(a<u);this.check=!0,this.index=c?null:p(l[le][De])-1,this.offset=c||d?null:p(o[Ms]),this.left=c||d?null:l[Ds][Ni](0,o[Ms]),this.right=c||d?null:l[Ds][Ni](o[Ms],l[Ds][Ke]),this.isSingle=d,this.isMulti=c;const m=d?f?o[Ot]:o[Ms]:null,y=d?f?o[Ms]:o[Ot]:null;this.selection={body:d?o.toString():h,start:m,end:y,left:d?l[Ds][Ni](0,m):null,right:d?l[Ds][Ni](y,l[Ds][Ke]):null};const v=c?g?a:u:null,w=n?0:c?g?o[Ot]:o[Ms]:null,b=c?g?u:a:null,C=n?e[qt][u][Ds][Ke]:c?g?o[Ms]:o[Ot]:null;this.multi={start:{index:v,offset:w},end:{index:b,offset:C},left:n?"":c?l[qt][v][Ds][Ni](0,w):null,right:n?"":c?l[qt][b][Ds][Ni](C,l[Ds][Ke]):null}}}class $o{#k;#x;#T=[];#N=[];constructor(t){this.#k=t}add(t,e,i){clearInterval(this.#x),null==i?this.#D(t,e):this.#x=setTimeout((i=>{this.#D(t,e)}),i)}#D(t,e){this.#T[vi]({[De]:t[De],[ri]:t[ri],[te]:[...this.#k[qt]].filter((t=>"DIV"==t.nodeName)).map((t=>t[Ds]))[Re]("\n")}),e&&(this.#N=[])}undo(){const t=this.#T[(this.#T||[])[Ke]-2];if(null==t)return;let e=this.#T.pop();return this.#N[vi](e),t}redo(){const t=this.#N.pop();if(null!=t)return this.#T[vi](t),t}}class Mo{#k;#n;#i=!1;preventDefault=!0;#E={"cmd+meta":1};#S={"cmd+b":(t,e)=>t.bold(e),"cmd+i":(t,e)=>t.italic(e),"cmd+shift+x":(t,e)=>t.strikethrough(e),"cmd+u":(t,e)=>t.underline(e),"cmd+m":(t,e)=>t.marker(e),"cmd+k":(t,e)=>t.code(e),"cmd+arrowup":(t,e)=>t.sup(e),"cmd+arrowdown":(t,e)=>t.sub(e)};#L={"cmd+shift+z":(t,e)=>t.redo(),"cmd+r":()=>{},f5:()=>{},"cmd+z":(t,e)=>t.undo(),"cmd+a":(t,e)=>(t.selectAll(),!1),"cmd+s":(t,e)=>(t.save(),!1),tab:(t,e)=>t.indent(e),"cmd+]":(t,e)=>t.rowIndent(e),enter:(t,e)=>t.wrap(e),backspace:(t,e)=>t.backspace(e)};constructor(t={}){this.#k=t[ce],this.#n=t.event,this.#i=t.hotKey;const e=this.#P(this.#n);if(!this.#E[xs](e)){if(this.#i&&this.#S[xs](e)){if(!1===this.#S[e](this.#k,this.#n))return;return this.#k[Ht][le].saved=0,void(this.#k[rs]&&(this.#k[rs][Ht][le].saved=0))}if(this.#L[xs](e)){if(!1===this.#L[e](this.#k,this.#n))return;return this.#k[Ht][le].saved=0,void(this.#k[rs]&&(this.#k[rs][Ht][le].saved=0))}this.preventDefault=!1}}#P(t){let e="";return(t.metaKey||t.ctrlKey)&&(e+="cmd+"),t.shiftKey&&(e+="shift+"),e+=t.key[Xi](),e}}class _o{editor;body;start;end;left;right;constructor(t,e){let i,s,n,o;this.editor=t,e.isMulti?(i=e.multi.start.index,s=e.multi.end.index,n=e.multi.left,o=e.multi.right):e.isSingle?(i=e.index,s=e.index,n=e.selection.left,o=e.selection.right):null!==e.index&&null!==e.offset&&(i=e.index,s=e.index,n=e.left,o=e.right),this.body=e.selection.body,this.start=p(i),this.end=p(s),this.left=n[Mi](/&lt;/g,"<")[Mi](/&gt;/g,">")[Mi](/&nbsp;/g," "),this.right=o[Mi](/&lt;/g,"<")[Mi](/&gt;/g,">")[Mi](/&nbsp;/g," ")}removeRows(){for(let t=this.end;t>this.start;t--)this.editor[qt][t][$i]()}}class Io{#k;#s;#n;#j;constructor(t={}){this.#k=t.editor,this.#s=s(null==t.autosave||t.autosave),this.#n=t.event||{};const e=xi+"."+Le+"-"+Kt,i=parseInt(this.#k[Ht][le].pin||0);this.#k[Ht][le].wrap;let n=this.#k[Ht][bi](e);if(this.#j=/nanomd\.pardn\.io/[qi](g[ke]),n)return;const o=[{[ei]:"format_bold",[Ji]:"添加粗體",[_i]:t=>this.#k.bold(t)},{[ei]:"format_italic",[Ji]:"添加斜體",[_i]:t=>this.#k.italic(t)},{[ei]:"strikethrough_s",[Ji]:"添加刪除線",[_i]:t=>this.#k.strikethrough(t)},{[ei]:"format_underlined",[Ji]:"添加底線",[_i]:t=>this.#k.underline(t)},{[ei]:"ink_marker",[Ji]:"添加高亮",[_i]:t=>this.#k.marker(t)},{[ei]:"superscript",[Ji]:"添加上標",[_i]:t=>this.#k.sup(t)},{[ei]:"subscript",[Ji]:"添加下標",[_i]:t=>this.#k.sub(t)},{[ei]:"format_quote",[Ji]:"添加引用",[_i]:t=>this.#k.blockquote(t)},{[ei]:"format_list_bulleted",[Ji]:"添加無序列表",[_i]:t=>this.#k.ul(t)},{[ei]:"format_list_numbered",[Ji]:"添加有序列表",[_i]:t=>this.#k.ol(t)},{[ei]:"code",[Ji]:"添加代碼塊",[_i]:t=>this.#k.code(t)},{[ei]:"link",[Ji]:"添加連結",[_i]:t=>this.#k.link("連結文字","連結")},{[ei]:"landscape",[Ji]:"添加圖片",[_i]:t=>this.#k.image("圖片連結","圖片名稱")},this.#n&&this.#n.upload?{[ei]:"smb_share",[Ji]:"上傳圖片",[_i]:async t=>{const e=await this.#n.upload();this.#k.image(e.href??"",e.alt??"測試")}}:null,{},this.#s?null:{[ei]:"autorenew",[Ji]:"儲存並預覽",[_i]:t=>this.#k.save(t)},{[ei]:i?"keep_off":"keep",[Ji]:"釘選面板",[_i]:t=>this.#R(t)},{[ei]:"wrap_text",[Ji]:"換行",[_i]:t=>this.#O()},this.#j?{[ei]:"cloud_upload",[Ji]:"部署",[_i]:t=>this.#F()}:null].map((t=>{if(null==t)return;if(null==t[ei]){return Hn("span")}let e=Hn("span.material-symbols-outlined",{title:t.title,[ei]:t[ei]},t[ei]);return e.onpointerup=t[_i],e}));n=Hn(e,o),n[ee]=!1,n[le].hide=1,this[Ht]=n}#R(t){const e=t.target,i=p(this.#k[Ht][le].pin||0);this.#k[Ht][le].pin=Math.abs(i-1),e[Ds]=i?"keep":"keep_off",e[Ji]=i?"釘選面板":"取消釘選"}#O(){const t=p(this.#k[Ht][le].wrap||1);this.#k[Ht][le].wrap=Math.abs(t-1)}async#F(){this.#k[Ht][Pt](this[Ht]),this[Ht][le][Ie]=1;const e=new URL(location.href),i=navigator.language||navigator.userLanguage;let s=e.searchParams.get("lang"),n=/^zh/i.test(i);null!=s&&(n=/^zh/i.test(s)),null==this.#k.deployKey&&(this.#k.deployKey=Date.now()+"."+Fn(16)),fetch("https://nanomd-deploy.pardn.workers.dev/",{method:"POST",headers:{"Content-Type":"application/json"},[Ht]:r[xt]({[kt]:this.#k.deployKey,[ns]:bo(`\n${this.#k.text}\n`)})[es]()[Mi](/[\u2028\u2029]/g,"")}).then((t=>t.text())).then((async e=>{confirm(n?"已成功部署並複製連結\n開啟頁面?":"Deployment successful and link copied.\nOpen the page?")&&t.open("https://nanomd-cloud.pardn.workers.dev/"+e)})).catch((t=>alert("Error:"+t.message)))}}t.MDParser=class{#H=!0;#z="";#K="";constructor(t={}){this.#H=t.standard??!0,this.#z=t.text??""}parse(t){return t=t??this.#z,this.#K=bo(`\n${t}\n`,null,null,this.#H),this.#K}};class ko{tag="";props={};children=[];data=null;constructor(t){if(t[Xs][Xi]()===Ii){let i=!1;for(const s of e[Me][Ks](Ii)||[])if(null!=t[Li]&&s[Li]===t[Li]||null!=t[Wi]&&s[Wi]===t[Wi]){i=!0;break}i||e[Me][Pt](t),this[Ki]=Ii}this[Ki]=t[Xs][Xi](),this[pi]=[...t.attributes].reduce(((t,e)=>(t[e[ei]]=e[ns][es](),t)),{}),this[qt]=function(t){return n[Ce](t[Zt]).filter((t=>t[Et]===h[Dt]||t[Et]===h[Nt]&&t[Wi]&&t[Wi][es]()[Ke]>0))}(t)[We]((t=>t.nodeType===Node[Dt]?new ko(t):t[Wi]||""))}getPatches(t){return this.#B(t,this)}#B(t,e,i=[]){if(null==t&&e)return[{[is]:$n.create,[De]:i,[cs]:e}];if(t&&!e)return[{[is]:$n.remove,[De]:i}];if(!t&&!e)return[];if(t.tag!==e.tag)return[{[is]:$n[Mi],[De]:i,[cs]:e}];const s=[];return s[vi](...this.#U(t,e,i)),s[vi](...this.#G(t,e,i)),s}#U(t,e,i=[]){if(null==t||"string"==typeof t||null==e||"string"==typeof e)return[];const s=[],n=t[pi]||{},r=o[Tt](n)[Ke],l=e[pi]||{},a=o[Tt](l)[Ke];if(a>0)for(let t in l){const n=l[t];s[vi]({[is]:$n.prop,[cs]:e,key:t,value:n,[De]:i})}if(r>0){if(a<1)for(let t in n)s[vi]({[is]:$n.prop,[cs]:e,key:t,[ns]:null,[De]:i});for(let t in l)a>0&&!(t in l)&&s[vi]({[is]:$n.prop,[cs]:e,key:t,[ns]:null,[De]:i})}return s}#G(t,e,i=[]){if(null==t||"string"==typeof t||null==e||"string"==typeof e)return[];const s=[],o=n[je](t[qt])?t[qt]:[],r=n[je](e[qt])?e[qt]:[],a=l.max(o[Ke],r[Ke]);for(let t=0;t<a;t++){const n=o[t],l=r[t],a=i.concat(t);if("string"==typeof n&&"string"==typeof l){if(n===l)continue;s[vi]({[is]:$n.text,[cs]:e,[ns]:l,[De]:a})}else null==n?s[vi]({[is]:$n.append,[cs]:l,[De]:a}):null==l?s[vi]({[is]:$n.remove,index:a}):s[vi](...this.#B(n,l,a))}return s}}t.PDMarkdownViewer=t.MDViewer=class{body;vbody;#Z;#q="";#W=300;#V=0;#Y;#J;#k;constructor(t={}){if((pe in t||fi in t)&&(this.#q=String(t[pe]||t[fi]||"")[es]()),Ri in t){t[Ri]}const n=t[Ri]||{},o=i(n[Qe]||Rt)[es]()[Xi](),r=s(null==n.fill?1:n.fill)?1:0,l=i(n[we]||"")[es]()||"sans-serif",a=t.sync||{};this.#W=p(null==a[ae]?300:a[ae])||300,this.#V=s(a[ki]||0)?1:0,this[ce]=a[ce]instanceof Co?a[ce]:null,e[Me][Pt](Hn(Ri,`.${ci}{font-family: ${l}}`));const u=document[ds](t[xe]);typeof t[xe]===Pi&&null!=u?(this[Ht]=u,u.classList.add(ci)):this[Ht]=Hn(xi+"."+ci),this[Ht][le][Qe]=w&&o===Rt||o===re?re:"",this[Ht][le].fill=r,this[Ht][le].sync=null==this[ce]?0:1,this[Ht][le].autosave=null==this[ce]?1:this[ce][Ht][le].autosave;const h=t.hashtag||{};if(this.#Y=i(h.path||"")[es](),this.#J=i(h[Bi]||"")[es](),null!=t.fillMode){let e=s(t.fillMode)?1:0;this[Ht][le].fill=e}if(null!=t[ae]&&(this.#W=p(t[ae])||300),null!=t[Gs]&&(this.#V=s(t[Gs])?1:0),null!=t[we]){let s=i(t[we])[es]()||"'Noto Sans TC', sans-serif";e[Me][Pt](Hn(Ri,`.${ci}{font-family: ${s}}`))}null!=t[Qs]&&(this.#Y=i(t[Qs]||"")[es]()),null!=t[tn]&&(this.#J=i(t[tn]||"")[es]()),this.vbody=new ko(this[Ht]),this.init()}get editor(){return this.#k}set editor(t){this.#k&&(this.#k[Ht][js]=null),null!=t&&(this.#k=t,this.#k.viewer=this,this.#V&&null!=this.#k&&(this.#k[Ht][js]=t=>{this[Ht][Zs]+=t.deltaY}))}#X(){if(null==this.#k)return"";const t=[...this.#k[Ht][Ks](he)];let e="";for(let s of t){var i=s[Ds][Mi](/[\u00A0\u0020]/g," ");i[es]()[Ke]<1?e+="\n":e+=i+"\n"}return e[es]()}clear(){let t=this[Ht].cloneNode(!0);t[Ns]="";let e=new ko(t);this[Ht][Ns]="",this.vbody=e}unsave(){0!==p(this[Ht][le].saved)&&(this[Ht][le].saved=0)}init(e=""){this[Ht][le].saved=1;let i=this.#q,s=this[Ht][Zs];t[Vt](this.#Z),this.#Z=t[Js]((()=>{if(t[Vt](this.#Z),i&&this[Ht][Ns]&&i===this[Ht][Ns])return;let n=e||this.#X()||i;n=bo(`\n${n}\n`,this.#Y,this.#J);let o=Hn(Zi);for(let t of[...Hn(he,n)[Zt]])o[Pt](t);this[Ht].replaceChildren(o);for(let e of[...this[Ht][Ks](Kt+"."+se)])e[Ps]=async e=>{t[Vt](jn);const i=e[Bi][Rs],s=i[vs],n=i[qt][0][Ds];try{await navigator.clipboard.writeText(n),s[St](Fi),jn=t[Js]((t=>{s[$i](Fi)}),1e3)}catch(t){console[ge](t),s[St](ge)}};let r=setInterval((()=>{null!=PR&&(clearInterval(r),this[Ht][Zs]=s,PR.prettyPrint())}),50)}),this.#W)}changeMode(t=Ue){this[Ht][le][Qe]=t}#Q(t,e){if(null!=t&&n[je](e)){this.#tt(t,e);for(const i of e){const{index:e}=i,s=r.parse(r[xt](e||[]));let n;i.type===$n.append&&(n=s?.pop());const o=s?this.#et(t,s):t;o&&(i.type===$n.create&&cs in i?this.#it(o,i):i.type===$n.replace&&cs in i&&null!=o[Os]?this.#st(o,i):i.type===$n.append&&cs in i&&null!=n?this.#nt(o,i,n):i.type===$n.prop&&kt in i&&ns in i&&o instanceof Element?this.#ot(o,i.key,i.value||"",i[cs]):i.type===$n.text&&ns in i&&o.nodeType===h[Nt]&&(o[Wi]=i.value||""))}}}#tt(t,e){const i=e.filter((t=>t.type===$n.remove)).sort(((t,e)=>{const i=(e.index.length||0)-(t.index.length||0);if(0!==i)return i;for(let i=0;i<(t.index.length||0);i++)if((t.index[i]||0)!==(e.index[i]||0))return(e.index[i]||0)-(t.index[i]||0);return 0}));for(const e of i){const i=this.#et(t,e.index);null!=i&&null!=i[Os]&&i[Os].removeChild(i)}}#it(t,i){if(i.type!==$n.create||!(cs in i))return;const s="string"==typeof i[cs]?e[Cs](i[cs]):this.#rt(i[cs]);null!=t[Rs]&&t[Rs][Pt](s)}#st(t,i){if(i.type!==$n.replace||!(cs in i)||null==t[Os])return;const s="string"==typeof i[cs]?e[Cs](i[cs]):this.#rt(i[cs]);if(t[Os].replaceChild(s,t),!(s instanceof Text||"string"==typeof i[cs])){for(const t in i[cs][pi])this.#ot(s,t,i[cs][pi][t]||"",i[cs]);this.#lt(i[cs],s)}}#nt(t,i,s){if(i.type!==$n.append||!(cs in i)||null==s)return;const n="string"==typeof i[cs]?e[Cs](i[cs]):this.#rt(i[cs]);if(s+1>t[qt][Ke]?t[Pt](n):t.insertBefore(n,t[qt][s+1]),"string"!=typeof i[cs]){for(const[e,n]of o.entries(i[cs][pi]))this.#ot(t[qt][s],e,n||"",i[cs]);this.#lt(i[cs],t[qt][s])}}#ot(t,e,i,s){null==i?t[_removeAttribute](e):null!=t&&t[qs](e,i)}#lt(t,e){if("string"==typeof t)return;let i=-1;for(const s in t.children){const n=t.children[+s];if(i++,"string"==typeof n){i--;continue}if(null==e)continue;const r=e.children[i];for(const[t,e]of o.entries(n[pi]))this.#ot(r,t,e||"",n);this.#lt(n,r)}}#et(t,e){let i=t,s=n.from(i.childNodes).filter((t=>t.nodeType===h[Dt]||t.nodeType===h[Nt]&&""!==t[Wi]?.trim()))||[];for(const t of e)i=s[t],null!=i&&(s=n.from(i.childNodes).filter((t=>t.nodeType===h[Dt]||t.nodeType===h[Nt]&&""!==t[Wi]?.trim()))||[]);return i}#rt(t){const i=e.createElement(t.tag);if(t[pi])for(const[e,s]of o.entries(t[pi]))e[It](":")||e[It]("@")||void 0!==s&&i[qs](e,s);for(const s of t[qt])"string"==typeof s?i[Pt](e[Cs](s)):i[Pt](this.#rt(s));return i}}}("undefined"==typeof window?window={}:window);export const editor = window.MDEditor; export const MDEditor = window.MDEditor; export const viewer = window.MDViewer; export const MDViewer = window.MDViewer; export const MDParser = window.MDParser;
